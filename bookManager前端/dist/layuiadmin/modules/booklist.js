/** layuiAdmin.std-v1.1.0 LPPL License By http://www.layui.com/admin/ */
 ;layui.define(["table","form","laydate"],function(e){var t=layui.$,o=layui.table;layui.form,layui.laydate;o.render({elem:"#book-manage",url:"http://localhost:8080/getBookList",headers:{Authorization:sessionStorage.getItem("token"),"Access-Control-Allow-Origin":"*"},where:{name:"",author:"",publisher:""},cols:[[{type:"checkbox",fixed:"left"},{field:"id",width:100,title:"ID",sort:!0},{field:"name",title:"教材名",minWidth:100},{field:"author",title:"作者"},{field:"publisher",title:"出版社"},{field:"publishTime",title:"出版时间"},{field:"price",title:"定价（元）"},{field:"stockSum",title:"库存"},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-book"}]],page:!0,groups:5,limit:30,height:"full-180",text:{none:"无结果"}}),o.on("tool(book-manage)",function(e){var i=e.data,a=i.id;if("del"===e.event)layer.confirm("确认删除",function(o){t.ajax({url:"http://localhost:8080/deleteOneBookById",type:"post",headers:{Authorization:sessionStorage.getItem("token"),"Access-Control-Allow-Origin":"*"},data:JSON.stringify(i),contentType:"application/json;charset=utf-8",dataType:"json",success:function(t){layer.msg(t.msg,{offset:"15px",icon:1,time:1e3},function(){e.del(),layer.close(o)})}})});else if("edit"===e.event){var a=(t(e.tr),e.data.id);layer.open({type:2,title:"编辑教材信息",content:"../../views/template/bookform.html",maxmin:!0,area:["500px","450px"],btn:["确定","取消"],yes:function(e,i){var n=window["layui-layer-iframe"+e],l="LAY-book-front-submit",s=i.find("iframe").contents().find("#"+l);n.layui.form.on("submit("+l+")",function(i){var n=i.field;n.id=a,t.ajax({url:"http://localhost:8080/updateBookInfo",type:"post",headers:{Authorization:sessionStorage.getItem("token"),"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},data:JSON.stringify(n),contentType:"application/json;charset=utf-8",dataType:"json",success:function(e){layer.msg("修改成功！",{offset:"15px",icon:1,time:1e3})}}),o.reload("book-manage"),layer.close(e)}),s.trigger("click")},success:function(e,t){}})}}),e("booklist",{})});