/** layuiAdmin.std-v1.1.0 LPPL License By http://www.layui.com/admin/ */
 ;layui.define(["form","upload"],function(t){var e=layui.$,a=layui.layer,n=(layui.laytpl,layui.setter,layui.view,layui.admin),s=layui.form,i=layui.upload;e("body");s.verify({nickname:function(t,e){return new RegExp("^[a-zA-Z0-9_一-龥\\s·]+$").test(t)?/(^\_)|(\__)|(\_+$)/.test(t)?"用户名首尾不能出现下划线'_'":/^\d+\d+\d$/.test(t)?"用户名不能全为数字":void 0:"用户名不能有特殊字符"},pass:[/^[\S]{6,16}$/,"密码必须6到16位，且不能出现空格"],repass:function(t){if(t!==e("#LAY_password").val())return"两次密码输入不一致"},mail:function(t){var e=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;if(""!=t&&!e.test(t))return"请输入正确的邮箱格式"},tel:function(t){var e=/^1[3456789]\d{9}$/;if(""!=t&&!e.test(t))return"请输入正确的电话号码"}}),s.on("submit(set_website)",function(t){return a.msg(JSON.stringify(t.field)),!1}),s.on("submit(set_system_email)",function(t){return a.msg(JSON.stringify(t.field)),!1}),s.on("submit(setmyinfo)",function(t){return a.msg(JSON.stringify(t.field)),!1});var o=e("#LAY_avatarSrc");i.render({url:"/api/upload/",elem:"#LAY_avatarUpload",done:function(t){0==t.status?o.val(t.url):a.msg(t.msg,{icon:5})}}),n.events.avartatPreview=function(t){var e=o.val();a.photos({photos:{title:"查看头像",data:[{src:e}]},shade:.01,closeBtn:1,anim:5})},s.on("submit(setmypass)",function(t){var n=t.field;n.username=sessionStorage.getItem("username"),e.ajax({url:"http://localhost:8080/updatePassword",type:"post",headers:{Authorization:sessionStorage.getItem("token"),"Access-Control-Allow-Origin":"*"},data:JSON.stringify(n),dataType:"json",contentType:"application/json;charse=utf-8",success:function(t){a.msg(t.msg,{},function(){location.reload()})},error:function(){a.msg("修改失败")}})}),t("set",{})});